<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Macæ‰§è¡Œnpmå‘½ä»¤å‡ºç°çš„é—®é¢˜</title>
    <url>/2019/12/20/Mac%E6%89%A7%E8%A1%8Cnpm%E5%91%BD%E4%BB%A4%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>æœ¬æ–‡è®°å½•äº†æˆ‘çš„Macä½¿ç”¨npmå®‰è£…æ’ä»¶å‡ºç°çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</p>
<h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h3><p>ä»Šå¤©å¯¹ä¹‹å‰hexoæ­å»ºçš„åšå®¢è¿›è¡Œä¸€äº›ä¸»é¢˜çš„ä¿®æ”¹ï¼Œç”¨åˆ°å‘½ä»¤<code>npm install hexo-generator-searchdb --save</code>å®‰è£…æœç´¢æ’ä»¶å‡ºç°é—®é¢˜ï¼ŒæŠ¥é”™ï¼Œ<code>gyp: No Xcode or CLT version detected!</code> å¦‚ä¸‹å›¾ï¼š</p>
<a id="more"></a> 
<p><img src="/images/mac/errorinfo.png" alt="error"></p>
<h3 id="è§£å†³è¿‡ç¨‹"><a href="#è§£å†³è¿‡ç¨‹" class="headerlink" title="è§£å†³è¿‡ç¨‹"></a>è§£å†³è¿‡ç¨‹</h3><p>ç™¾åº¦å‘ç°æ˜¯ç¼ºäº†Xcodeçš„CLIå·¥å…·ï¼Œäºæ˜¯æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo xcode-select --install</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ä¾ç„¶æŠ¥é”™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">xcode-select: error: command line tools are already installed, use &quot;Software Update&quot; to install updates</span><br></pre></td></tr></table></figure>
<p>æç¤ºCLIå·²ç»å®‰è£…ã€‚ç™¾åº¦åˆ°CommandLineToolsçš„è·¯å¾„è¿›è¡ŒæŸ¥çœ‹ï¼Œå‘ç°çš„å´æœ‰ç›¸å…³æ–‡ä»¶ï¼Œ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># CommandLineToolsçš„è·¯å¾„</span><br><span class="line">/Library/Developer/CommandLineTools</span><br></pre></td></tr></table></figure>
<p>æŸ¥é˜…ä¸€äº›èµ„æ–™åå‘ç°å¤šç¯‡æ–‡ç« æåˆ°åº”ç”¨æ–‡ä»¶å¤¹ä¸‹çš„<code>Xcode.app</code>ï¼Œçªç„¶æƒ³èµ·å¥½åƒæ˜¯å› ä¸ºæ²¡è£…Xcodeåº”ç”¨ï¼Œäºæ˜¯åœ¨App Storeæ‰¾åˆ°Xcodeå¹¶å®‰è£…ï¼Œç„¶ååœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤<code>xcodebuild -version</code>æŸ¥çœ‹ç‰ˆæœ¬ï¼Œå‘ç°åˆæŠ¥äº†ä¸€ä¸ªé”™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">xcodebuild -versionxcode-select: error: tool &apos;xcodebuild&apos; requires Xcode, but active developer directory &apos;/Library/Developer/CommandLineTools&apos; is a command line tools instance</span><br></pre></td></tr></table></figure>
<p>æŸ¥çœ‹ç³»ç»Ÿé»˜è®¤çš„Xcodeè·¯å¾„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">è¾“å…¥å‘½ä»¤ï¼šxcode-select --print-path</span><br><span class="line"></span><br><span class="line">ç»“æœï¼š/Library/Developer/CommandLineTools</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶å®‰è£…äº†Xcodeï¼Œä½†å¹¶ä¸æ˜¯ç³»ç»Ÿé»˜è®¤ä½ç½®ï¼Œæ‰€ä»¥é€šè¿‡ä¸‹é¢å‘½ä»¤ä¿®æ”¹è·¯å¾„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># switchåé¢æ˜¯å®‰è£…çš„Xcodeçš„è·¯å¾„</span><br><span class="line">sudo xcode-select --switch /Applications/Xcode.app/Contents/Developer</span><br></pre></td></tr></table></figure>
<p>é‡æ–°æ‰§è¡Œnpmå‘½ä»¤ï¼Œæ‰§è¡Œé€šè¿‡ã€‚</p>
<p>è™½ç„¶è¸©äº†å¾ˆå¤šå‘ï¼Œä½†æ˜¯è‡³å°‘é—®é¢˜è§£å†³äº†ä¸æ˜¯ğŸ˜Š</p>
]]></content>
      <categories>
        <category>Node</category>
      </categories>
      <tags>
        <tag>Mac</tag>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå¸¸ç”¨æ“ä½œ</title>
    <url>/2019/12/19/Linux%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/</url>
    <content><![CDATA[<h3 id="é˜²ç«å¢™å¼€å¯ç«¯å£"><a href="#é˜²ç«å¢™å¼€å¯ç«¯å£" class="headerlink" title="é˜²ç«å¢™å¼€å¯ç«¯å£"></a>é˜²ç«å¢™å¼€å¯ç«¯å£</h3><h4 id="centos6"><a href="#centos6" class="headerlink" title="centos6"></a>centos6</h4><ul>
<li>å¼€å¯ç›¸å…³ç«¯å£</li>
</ul>
<blockquote>
<p>/sbin/iptables -I INPUT -p tcp â€“dport 80 -j ACCEPT</p>
</blockquote>
<blockquote>
<p>/sbin/iptables -I INPUT -p tcp â€“dport 3306 -j ACCEPT</p>
</blockquote>
<a id="more"></a> 
<ul>
<li>ä¿å­˜é…ç½®</li>
</ul>
<blockquote>
<p>/etc/rc.d/init.d/iptables save</p>
</blockquote>
<ul>
<li>é‡å¯æœåŠ¡</li>
</ul>
<blockquote>
<p>/etc/rc.d/init.d/iptables restart</p>
</blockquote>
<h4 id="centos7"><a href="#centos7" class="headerlink" title="centos7"></a>centos7</h4><ul>
<li>æ”¾å¼€é˜²ç«å¢™8888ç«¯å£</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-port=9090/tcp</span><br></pre></td></tr></table></figure>
<ul>
<li>é‡å¯é˜²ç«å¢™</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>
<h3 id="å¸è½½mysql"><a href="#å¸è½½mysql" class="headerlink" title="å¸è½½mysql"></a>å¸è½½mysql</h3><ul>
<li>æºç å®‰è£…</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">find / -name mysql</span><br><span class="line">rm -rf ä¸Šè¾¹æŸ¥æ‰¾åˆ°çš„è·¯å¾„ï¼Œå¤šä¸ªè·¯å¾„ç”¨ç©ºæ ¼éš”å¼€</span><br><span class="line">#æˆ–è€…ä¸‹è¾¹ä¸€æ¡å‘½ä»¤å³å¯</span><br><span class="line">find / -name mysql|xargs rm -rf</span><br></pre></td></tr></table></figure>
<ul>
<li>rpmå®‰è£…</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// æŸ¥çœ‹</span><br><span class="line">rpm -qa | grep mysql</span><br><span class="line">// åˆ é™¤</span><br><span class="line">rpm -e mysqlã€€ã€€// æ™®é€šåˆ é™¤æ¨¡å¼</span><br><span class="line">rpm -e --nodeps mysqlã€€ã€€// å¼ºåŠ›åˆ é™¤æ¨¡å¼ï¼Œå¦‚æœä½¿ç”¨ä¸Šé¢å‘½ä»¤åˆ é™¤æ—¶ï¼Œæç¤ºæœ‰ä¾èµ–çš„å…¶å®ƒæ–‡ä»¶ï¼Œåˆ™ç”¨è¯¥å‘½ä»¤å¯ä»¥å¯¹å…¶è¿›è¡Œå¼ºåŠ›åˆ é™¤</span><br></pre></td></tr></table></figure>
<h3 id="scpå…å¯†ä¼ è¾“æ–‡ä»¶"><a href="#scpå…å¯†ä¼ è¾“æ–‡ä»¶" class="headerlink" title="scpå…å¯†ä¼ è¾“æ–‡ä»¶"></a>scpå…å¯†ä¼ è¾“æ–‡ä»¶</h3><ul>
<li>ç”Ÿæˆé…å¯¹å¯†é’¥</li>
</ul>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">æ‰§è¡Œå‘½ä»¤ï¼šssh-keygen -t rsa</span><br><span class="line">è¿‡ç¨‹ï¼šä¸€è·¯enterä¸è¦è¾“å…¥å¯†ç </span><br><span class="line">/root/.ssh/id_rsa already exists.</span><br><span class="line">Overwrite (y/n)? y</span><br><span class="line">Enter passphrase (empty for no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">SHA256:Izal7G5mpRxGiJ+mMHVZO4keVZuCrqGrHB8z2Qz7E8A root@localhost.localdomain</span><br><span class="line">The key&apos;s randomart image is:</span><br></pre></td></tr></table></figure>
<ul>
<li>å°†<code>/root/.ssh</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>id_rsa.pub</code>ä¸Šä¼ åˆ°ç›®æ ‡æœåŠ¡å™¨çš„ç›¸åŒè·¯å¾„å¹¶é‡å‘½åä¸º<code>authorized_keys</code></li>
</ul>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scp id_rsa.pub root@47.100.168.214:/root/.ssh/authorized_keys</span><br></pre></td></tr></table></figure>
<h3 id="æœç´¢æ–‡ä»¶"><a href="#æœç´¢æ–‡ä»¶" class="headerlink" title="æœç´¢æ–‡ä»¶"></a>æœç´¢æ–‡ä»¶</h3><ul>
<li>findå‘½ä»¤</li>
</ul>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">find / -name &apos;findname&apos;</span><br><span class="line">æœç´¢æ ¹ç›®å½•ä¸‹æ‰€æœ‰åä¸ºfindnameçš„æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<ul>
<li>locateå‘½ä»¤</li>
</ul>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">locate &apos;findname&apos;</span><br></pre></td></tr></table></figure>
<h3 id="LinuxæŸ¥çœ‹æ—¥å¿—"><a href="#LinuxæŸ¥çœ‹æ—¥å¿—" class="headerlink" title="LinuxæŸ¥çœ‹æ—¥å¿—"></a>LinuxæŸ¥çœ‹æ—¥å¿—</h3><ul>
<li>æŸ¥çœ‹æ—¥å¿—ï¼š </li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">å¸¸ç”¨ï¼Œæ˜¾ç¤ºæœ€å3000è¡Œï¼š</span><br><span class="line">cat api.log | tail -n 3000</span><br><span class="line"></span><br><span class="line">linux å¦‚ä½•æ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„æŸå‡ è¡Œ(ä¸­é—´å‡ è¡Œ)</span><br><span class="line"></span><br><span class="line">ä»ç¬¬3000è¡Œå¼€å§‹ï¼Œæ˜¾ç¤º1000è¡Œã€‚å³æ˜¾ç¤º3000~3999è¡Œ</span><br><span class="line">cat filename | tail -n +3000 | head -n 1000</span><br><span class="line"></span><br><span class="line">æ˜¾ç¤º1000è¡Œåˆ°3000è¡Œ</span><br><span class="line">cat filename| head -n 3000 | tail -n +1000</span><br><span class="line"></span><br><span class="line">*æ³¨æ„ä¸¤ç§æ–¹æ³•çš„é¡ºåº</span><br><span class="line">åˆ†è§£ï¼š</span><br><span class="line">tail -n 1000ï¼šæ˜¾ç¤ºæœ€å1000è¡Œ</span><br><span class="line">tail -n +1000ï¼šä»1000è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œæ˜¾ç¤º1000è¡Œä»¥åçš„</span><br><span class="line">head -n 1000ï¼šæ˜¾ç¤ºå‰é¢1000è¡Œ</span><br><span class="line"></span><br><span class="line">ç”¨sedå‘½ä»¤</span><br><span class="line">sed -n &apos;5,10p&apos; filename è¿™æ ·ä½ å°±å¯ä»¥åªæŸ¥çœ‹æ–‡ä»¶çš„ç¬¬5è¡Œåˆ°ç¬¬10è¡Œã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹ï¼šcat mylog.log | tail -n 1000 #è¾“å‡ºmylog.log æ–‡ä»¶æœ€åä¸€åƒè¡Œ</span><br></pre></td></tr></table></figure>
<ul>
<li>æŸ¥æ‰¾æŒ‡å®šä¿¡æ¯</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat log.txt | grep &apos;ERROR&apos; -A 5</span><br><span class="line"></span><br><span class="line">æ„æ€æ˜¯ï¼Œåœ¨log.txtæ–‡ä»¶ä¸­ï¼ŒæŸ¥æ‰¾ERRORå­—ç¬¦ï¼Œå¹¶æ˜¾ç¤ºERRORæ‰€åœ¨è¡Œçš„ä¹‹å5è¡Œ</span><br><span class="line"></span><br><span class="line">cat log.txt | grep &apos;ERROR&apos; -B 5  ä¹‹å‰5è¡Œ</span><br><span class="line"></span><br><span class="line">cat log.txt | grep &apos;ERROR&apos; -C 5 å‰å5è¡Œ</span><br><span class="line"></span><br><span class="line">cat log.txt | grep -v &apos;ERROR&apos; æ’é™¤ERRORæ‰€åœ¨çš„è¡Œ</span><br></pre></td></tr></table></figure>
<h3 id="linuxå…¬é’¥å…å¯†ç ç™»å½•"><a href="#linuxå…¬é’¥å…å¯†ç ç™»å½•" class="headerlink" title="linuxå…¬é’¥å…å¯†ç ç™»å½•"></a>linuxå…¬é’¥å…å¯†ç ç™»å½•</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsaè·å¾—id_rsaã€id_rsa.pub</span><br><span class="line">å°†.pubæ–‡ä»¶ä¸­å…¬é’¥å¤åˆ¶åˆ°æœåŠ¡å™¨çš„/root/.sshæ–‡ä»¶å¤¹ä¸­çš„authorized_keysæ–‡ä»¶ä¸­</span><br></pre></td></tr></table></figure>
<h2 id="nginxå¸¸ç”¨æ“ä½œ"><a href="#nginxå¸¸ç”¨æ“ä½œ" class="headerlink" title="nginxå¸¸ç”¨æ“ä½œ"></a>nginxå¸¸ç”¨æ“ä½œ</h2><blockquote>
<p>å¾…å®Œå–„</p>
</blockquote>
<h2 id="åˆ«åå¯åŠ¨-shè„šæœ¬"><a href="#åˆ«åå¯åŠ¨-shè„šæœ¬" class="headerlink" title="åˆ«åå¯åŠ¨.shè„šæœ¬"></a>åˆ«åå¯åŠ¨.shè„šæœ¬</h2><ul>
<li>1ã€~è·¯å¾„ä¸‹æ–°å¢æ–‡ä»¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">touch .bash_profile</span><br></pre></td></tr></table></figure>
<ul>
<li>2ã€ç¼–è¾‘</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">vi .bash_profile</span><br></pre></td></tr></table></figure>
<ul>
<li>3ã€å†™å…¥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># sshç®¡ç†è„šæœ¬</span><br><span class="line">alias so=/Users/tang/source/so/so.sh</span><br></pre></td></tr></table></figure>
<h2 id="scpå‘½ä»¤"><a href="#scpå‘½ä»¤" class="headerlink" title="scpå‘½ä»¤"></a>scpå‘½ä»¤</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ä»æœåŠ¡å™¨ä¸‹è½½æ•´ä¸ªæ–‡ä»¶å¤¹åˆ°æŒ‡å®šæœåŠ¡å™¨æ–‡ä»¶å¤¹</span><br><span class="line">scp -r root@47.101.184.179:/home/mins-test/cloud/qrcode Downloads/</span><br></pre></td></tr></table></figure>
<h2 id="æŸ¥çœ‹æœ€è¿‘ç™»å½•çš„å‡ ä¸ªç”¨æˆ·"><a href="#æŸ¥çœ‹æœ€è¿‘ç™»å½•çš„å‡ ä¸ªç”¨æˆ·" class="headerlink" title="æŸ¥çœ‹æœ€è¿‘ç™»å½•çš„å‡ ä¸ªç”¨æˆ·"></a>æŸ¥çœ‹æœ€è¿‘ç™»å½•çš„å‡ ä¸ªç”¨æˆ·</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">last -n 100|awk &apos;&#123;print $1&quot;\t&quot;$3&#125;&apos;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
  <entry>
    <title>SSHæ¡†æ¶-åŸºäºannotationçš„sshæ¡†æ¶æ•´åˆé…ç½®</title>
    <url>/2019/03/22/SSH%E6%A1%86%E6%9E%B6-annotation%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>æœ¬æ–‡ç®€å•çš„è®°å½•äº†åŸºäºannotationè¿›è¡Œsshæ¡†æ¶æ•´åˆé…ç½®ï¼›</p>
<h3 id="éœ€è¦çš„é…ç½®æ–‡ä»¶"><a href="#éœ€è¦çš„é…ç½®æ–‡ä»¶" class="headerlink" title="éœ€è¦çš„é…ç½®æ–‡ä»¶"></a>éœ€è¦çš„é…ç½®æ–‡ä»¶</h3><blockquote>
<p>Strtsu2æ¡†æ¶ï¼šsrc/strtus.xml<br>Springæ¡†æ¶ï¼šsrc/applicationContext.xml<br>å…³äºæ—¥å¿—ï¼šlog4j.properties<br>å…³äºæ•°æ®åº“è¿æ¥ï¼šdb.properties</p>
</blockquote>
<a id="more"></a> 
<h3 id="web-xmlé…ç½®-åŒåŸºäºxmlçš„é…ç½®"><a href="#web-xmlé…ç½®-åŒåŸºäºxmlçš„é…ç½®" class="headerlink" title="web.xmlé…ç½®(åŒåŸºäºxmlçš„é…ç½®)"></a>web.xmlé…ç½®(åŒåŸºäºxmlçš„é…ç½®)</h3><h3 id="domainä¸‹beançš„æ³¨è§£é…ç½®"><a href="#domainä¸‹beançš„æ³¨è§£é…ç½®" class="headerlink" title="domainä¸‹beançš„æ³¨è§£é…ç½®"></a>domainä¸‹beançš„æ³¨è§£é…ç½®</h3><ul>
<li>@Entityï¼šå®šä¹‰å®ä½“ç±»</li>
<li>@Tableï¼šå®šä¹‰è¡¨</li>
<li>@Idï¼šä¸»é”®</li>
<li>@GeneratedValueï¼šæ³¨è§£ç”Ÿæˆç­–ç•¥</li>
<li>@Columnï¼šå®šä¹‰åˆ—(å¯ä»¥çœç•¥)</li>
</ul>
<h3 id="æ•´åˆhibernate"><a href="#æ•´åˆhibernate" class="headerlink" title="æ•´åˆhibernate"></a>æ•´åˆhibernate</h3><p>applicationContext.xmlè¿›è¡Œé…ç½®</p>
<p>1ã€éœ€è¦å¼•å…¥<code>db.properties</code>æ–‡ä»¶ï¼Œå¹¶ä¸”æ•°æ®åº“ç›¸å…³ä¿¡æ¯éƒ½åœ¨<code>db.properties</code>æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥å¤–éƒ¨ çš„propertiesæ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:db.properties"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>2ã€é…ç½®è¿æ¥æ± <br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ›å»ºc3p0è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"c3p0DataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driverClass&#125;"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>3ã€å¼€å¯æ³¨è§£æ‰«æ<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼€å¯æ³¨è§£æ‰«æ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>4ã€é…ç½®sessionFactory</p>
<ol>
<li>åŠ è½½ä¸Šè¿°æ­¥éª¤é…ç½®çš„è¿æ¥æ± </li>
<li>é…ç½®hibernateProperties</li>
<li>åŠ è½½æ³¨è§£ç±»<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sessionFactory"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"c3p0DataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernateProperties"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line">			hibernate.show_sql=true</span><br><span class="line">			hibernate.format_sql=true</span><br><span class="line">			hibernate.dialect=org.hibernate.dialect.MySQLDialect</span><br><span class="line">			hibernate.hbm2ddl.auto=update</span><br><span class="line">		<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- åŠ è½½æ³¨è§£ç±» --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"packagesToScan"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>com.itheima.domain<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>5ã€å£°æ˜äº‹åŠ¡ç®¡ç†å™¨<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å£°æ˜äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>6ã€åŠ è½½äº‹åŠ¡æ³¨è§£é©±åŠ¨<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- äº‹åŠ¡æ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>beançš„æ³¨å†Œ<br>@Componentï¼šä¸ç¡®å®šä½ç½®<br>@Rpositoryï¼šç”¨äºDAOå±‚<br>@Serviceï¼šç”¨äºserviceå±‚<br>@Controllerï¼šç”¨äºè¡¨ç°å±‚</p>
</blockquote>
<h3 id="daoæ³¨è§£é…ç½®"><a href="#daoæ³¨è§£é…ç½®" class="headerlink" title="daoæ³¨è§£é…ç½®"></a>daoæ³¨è§£é…ç½®</h3><p>aã€@Repository(â€œuserDaoâ€)ï¼šæ³¨å†Œbean</p>
<p>bã€æ³¨å…¥sessionFactory<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"sessionFactory"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuperSessionFactory</span><span class="params">(SessionFactory sessionFactory)</span></span>&#123;</span><br><span class="line">	<span class="keyword">super</span>.setSessionFactory(sessionFactory);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="serviceæ³¨è§£é…ç½®"><a href="#serviceæ³¨è§£é…ç½®" class="headerlink" title="serviceæ³¨è§£é…ç½®"></a>serviceæ³¨è§£é…ç½®</h3><p>aã€@Service(â€œuserServiceâ€)ï¼šæ³¨å†Œbean    // æ³¨æ„ï¼šè¦å®šä¹‰åå­—ï¼Œå¦åˆ™åœ¨actionæ³¨å…¥æ—¶å¯èƒ½æŠ¥é”™</p>
<p>bã€@Transactionalï¼šå¼€å¯äº‹åŠ¡</p>
<p>cã€æ³¨å…¥daoï¼šéœ€è¦æä¾›setæ–¹æ³•<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ³¨å…¥userDao</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"userDao"</span>)</span><br><span class="line"><span class="keyword">private</span> IUserDao userDao;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserDao</span><span class="params">(IUserDao userDao)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="actionæ³¨è§£é…ç½®"><a href="#actionæ³¨è§£é…ç½®" class="headerlink" title="actionæ³¨è§£é…ç½®"></a>actionæ³¨è§£é…ç½®</h3><p>æ³¨æ„ï¼š</p>
<blockquote>
<p>1.éœ€è¦struts2-spring-plugin.jar<br>2.actionç±»éœ€è¦ç»§æ‰¿<code>ActionSupport</code>;<br>3.æ•°æ®å°è£…ï¼šå®ç°<code>ModelDriven&lt;T&gt;</code>æ¥å£å¹¶æä¾›å®ä¾‹åŒ–beanå¯¹è±¡</p>
</blockquote>
<p>1ã€ç±»ä¸ŠåŸºæœ¬é…ç½®<br>    @Controller<br>    @Scope(â€œprototypeâ€)<br>    @Namespace(â€œ/â€œ)<br>    @ParentPackage(â€œstruts-defaultâ€)</p>
<p>2ã€serviceæ³¨å…¥<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="meta">@Qualifier</span>(<span class="string">"userService"</span>)</span><br><span class="line"><span class="keyword">private</span> IUserService userService;</span><br></pre></td></tr></table></figure></p>
<p>3ã€é…ç½®action<br><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Action</span>(value=<span class="string">"user_add"</span>,results=&#123;<span class="meta">@Result</span>(name=<span class="string">"success"</span>,location=<span class="string">"/success.jsp"</span>)&#125;)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	userService.add(user);</span><br><span class="line">	<span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="å»¶è¿ŸåŠ è½½çš„é—®é¢˜"><a href="#å»¶è¿ŸåŠ è½½çš„é—®é¢˜" class="headerlink" title="å»¶è¿ŸåŠ è½½çš„é—®é¢˜"></a>å»¶è¿ŸåŠ è½½çš„é—®é¢˜</h3><p>åœ¨web.xmlä¸­é…ç½®openSessionInViewFilter<br>æ³¨æ„:openSessionInViewFilterä¸€å®šè¦åœ¨Struts2 Filterå‰é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- openSessionInViewFilter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>openSessionInView<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.orm.hibernate5.support.OpenSessionInViewFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>openSessionInView<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¡†æ¶    &lt;!--åªèƒ½æœ‰ä¸€ä¸ªåˆ†ç±»--&gt;</category>
      </categories>
      <tags>
        <tag>ssh</tag>
        <tag>æ³¨è§£</tag>
      </tags>
  </entry>
  <entry>
    <title>SSHæ¡†æ¶-åŸºäºxmlçš„sshæ¡†æ¶æ•´åˆé…ç½®</title>
    <url>/2019/03/22/SSH%E6%A1%86%E6%9E%B6-xml%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>å­¦ä¹ è¿‡ç¨‹ä¸­è®°å½•äº†åŸºäºxmlçš„sshæ¡†æ¶æ•´åˆçš„ä¸€äº›ç®€å•é…ç½®</p>
<h3 id="éœ€è¦çš„é…ç½®æ–‡ä»¶"><a href="#éœ€è¦çš„é…ç½®æ–‡ä»¶" class="headerlink" title="éœ€è¦çš„é…ç½®æ–‡ä»¶"></a>éœ€è¦çš„é…ç½®æ–‡ä»¶</h3><blockquote>
<p>Strtsu2æ¡†æ¶ï¼šsrc/strtus.xml<br>Hibernateæ¡†æ¶ï¼šsrc/hibernate.cfg.xmlï¼›åœ¨domainæœ‰ Xxx.hbm.xml<br>Springæ¡†æ¶ï¼šsrc/applicationContext.xml<br>å…³äºæ—¥å¿—ï¼šlog4j.properties<br>å…³äºæ•°æ®åº“è¿æ¥ï¼šdb.properties</p>
</blockquote>
<a id="more"></a> 
<h3 id="web-xmlé…ç½®-å¿…é¡»"><a href="#web-xmlé…ç½®-å¿…é¡»" class="headerlink" title="web.xmlé…ç½®(å¿…é¡»)"></a>web.xmlé…ç½®(å¿…é¡»)</h3><h4 id="é…ç½®springç›‘å¬å™¨åŠæŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®"><a href="#é…ç½®springç›‘å¬å™¨åŠæŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®" class="headerlink" title="é…ç½®springç›‘å¬å™¨åŠæŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®"></a>é…ç½®springç›‘å¬å™¨åŠæŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®springçš„ç›‘å¬å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æŒ‡å®šspringæ¡†æ¶é…ç½®æ–‡ä»¶æ‰€åœ¨ä½ç½® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="é…ç½®struts2çš„filter"><a href="#é…ç½®struts2çš„filter" class="headerlink" title="é…ç½®struts2çš„filter"></a>é…ç½®struts2çš„filter</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®structs2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="springæ•´åˆhibernate"><a href="#springæ•´åˆhibernate" class="headerlink" title="springæ•´åˆhibernate"></a>springæ•´åˆhibernate</h3><h4 id="æ–¹å¼ä¸€ï¼šé›¶éšœç¢æ•´åˆ"><a href="#æ–¹å¼ä¸€ï¼šé›¶éšœç¢æ•´åˆ" class="headerlink" title="æ–¹å¼ä¸€ï¼šé›¶éšœç¢æ•´åˆ"></a>æ–¹å¼ä¸€ï¼šé›¶éšœç¢æ•´åˆ</h4><p>æ³¨æ„ï¼šéœ€è¦hibernate.cfg.xmlé…ç½®æ–‡ä»¶ï¼Œå¼•ç”¨æ—¶æ ¹æ®éœ€æ±‚å˜åŠ¨å¤„ä¸ºï¼š1.é…ç½®æ•°æ®åº“ç›¸å…³ä¿¡æ¯ï¼›2.mappingæ ‡ç­¾æ˜ å°„å®ä½“ç±»<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sessionFactory"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"configLocation"</span> <span class="attr">value</span>=<span class="string">"classpath:hibernate.cfg.xml"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="æ–¹å¼äºŒï¼šspringç®¡ç†hibernateé…ç½®-å»ºè®®ä½¿ç”¨"><a href="#æ–¹å¼äºŒï¼šspringç®¡ç†hibernateé…ç½®-å»ºè®®ä½¿ç”¨" class="headerlink" title="æ–¹å¼äºŒï¼šspringç®¡ç†hibernateé…ç½®(å»ºè®®ä½¿ç”¨)"></a>æ–¹å¼äºŒï¼šspringç®¡ç†hibernateé…ç½®(å»ºè®®ä½¿ç”¨)</h4><blockquote>
<p>è¯¥æ–¹å¼ä¸éœ€è¦hibernate.cfg.xmlæ–‡ä»¶ï¼Œæ‰€æœ‰å…³äºhibernate.cfg.xmlæ–‡ä»¶ä¸­çš„é…ç½®éƒ½åœ¨springçš„é…ç½®æ–‡ä»¶ä¸­æ¥é…ç½®<br>è¯¦ç»†é…ç½®è§applicationContext.xmlæ–‡ä»¶</p>
</blockquote>
<p>==æ³¨æ„ï¼š==</p>
<p>1ã€éœ€è¦å¼•å…¥<code>db.properties</code>æ–‡ä»¶ï¼Œå¹¶ä¸”æ•°æ®åº“ç›¸å…³ä¿¡æ¯éƒ½åœ¨<code>db.properties</code>æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥å¤–éƒ¨ çš„propertiesæ–‡ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath:db.properties"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>2ã€é…ç½®è¿æ¥æ± <br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ›å»ºc3p0è¿æ¥æ±  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"c3p0DataSource"</span> <span class="attr">class</span>=<span class="string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClass"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driverClass&#125;"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jdbcUrl"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"user"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>3ã€é…ç½®<code>sessionFactory</code></p>
<ol>
<li>åŠ è½½ä¸Šè¿°æ­¥éª¤é…ç½®çš„è¿æ¥æ± </li>
<li>é…ç½®hibernateProperties</li>
<li>åŠ è½½domainä¸‹çš„<code>ç±»å.hbm.xml</code><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sessionFactory"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- åŠ è½½è¿æ¥æ±  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"c3p0DataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"hibernateProperties"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span></span><br><span class="line">			hibernate.show_sql=true</span><br><span class="line">			hibernate.format_sql=true</span><br><span class="line">			<span class="comment">&lt;!-- hibernateçš„æ–¹è¨€ï¼Œå¿…é¡»é…ç½® --&gt;</span></span><br><span class="line">			hibernate.dialect=org.hibernate.dialect.MySQLDialect</span><br><span class="line">			hibernate.hbm2ddl.auto=update</span><br><span class="line">		<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- åŠ è½½hibernateçš„Xxx.hbm.xmlé…ç½®æ–‡ä»¶ --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mappingResources"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>com/itheima/domain/User.hbm.xml<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>4ã€å£°æ˜dao<br>==æ³¨æ„==ï¼šdaoéœ€è¦ç»§æ‰¿<code>HibernateDaoSupport</code>ç±»ï¼Œæ­¤æ—¶æ³¨å…¥<code>sessionFactory</code>æ‰å¯ä»¥è·å¾—<code>HibernateTemplate</code>è¿›è¡Œæ•°æ®æŒä¹…åŒ–æ“ä½œ<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å£°æ˜UserDao --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDao"</span> <span class="attr">class</span>=<span class="string">"com.itheima.dao.UserDaoImpl"</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- æ³¨å…¥sessionFactory --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>5ã€å£°æ˜service<br>==serviceç±»ä¸­éœ€è¦æä¾›daoçš„setæ–¹æ³•ä»¥ä¾¿daoçš„æ³¨å…¥==<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"com.itheima.service.UserServiceImpl"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userDao"</span> <span class="attr">ref</span>=<span class="string">"userDao"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>6ã€äº‹åŠ¡ç®¡ç†<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å£°æ˜äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é€šçŸ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"find*"</span> <span class="attr">read-only</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"add"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"update"</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"delete"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å£°æ˜åˆ‡é¢ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- å£°æ˜åˆ‡ç‚¹ --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* com.itheima.service.*..*(..))"</span> <span class="attr">id</span>=<span class="string">"myPointcut"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"myPointcut"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="Springæ•´åˆstruts2æ¡†æ¶"><a href="#Springæ•´åˆstruts2æ¡†æ¶" class="headerlink" title="Springæ•´åˆstruts2æ¡†æ¶"></a>Springæ•´åˆstruts2æ¡†æ¶</h3><p>æ³¨æ„ï¼š</p>
<blockquote>
<p>1.éœ€è¦struts2-spring-plugin.jar<br>2.actionç±»éœ€è¦ç»§æ‰¿<code>ActionSupport</code>;<br>3.æ•°æ®å°è£…ï¼šå®ç°<code>ModelDriven&lt;T&gt;</code>æ¥å£å¹¶æä¾›å®ä¾‹åŒ–beanå¯¹è±¡</p>
</blockquote>
<p>é…ç½®struts.xml<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">struts</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"default"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"user_*"</span> <span class="attr">class</span>=<span class="string">"userAction"</span></span></span><br><span class="line"><span class="tag">			<span class="attr">method</span>=<span class="string">"&#123;1&#125;"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/success.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">action</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">struts</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="æ–¹å¼ä¸€ï¼šspringç®¡ç†action-å»ºè®®ä½¿ç”¨"><a href="#æ–¹å¼ä¸€ï¼šspringç®¡ç†action-å»ºè®®ä½¿ç”¨" class="headerlink" title="æ–¹å¼ä¸€ï¼šspringç®¡ç†action(å»ºè®®ä½¿ç”¨)"></a>æ–¹å¼ä¸€ï¼šspringç®¡ç†action(å»ºè®®ä½¿ç”¨)</h4><p>1ã€<code>applicationContext.xml</code>ä¸­é…ç½®<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é…ç½®action --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userAction"</span> <span class="attr">class</span>=<span class="string">"com.itheima.action.UserAction"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userService"</span> <span class="attr">ref</span>=<span class="string">"userService"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>2ã€actionç±»ä¸­éœ€è¦æä¾›serviceçš„setæ–¹æ³•ä»¥ä¾¿serviceçš„æ³¨å…¥</p>
<p>3ã€ä¸Šè¿°struts.xmlä¸­actionæ ‡ç­¾ä¸­classçš„é…ç½®ä½¿ç”¨beanä¸­çš„id</p>
<p>4ã€è¿™ç§æ–¹å¼å¿…é¡»é…ç½®<code>scope=&quot;prototype&quot;</code>ï¼Œå› ä¸ºactionæ˜¯å¤šä¾‹çš„</p>
<h4 id="æ–¹å¼äºŒï¼šactionè‡ªåŠ¨æ³¨å…¥service"><a href="#æ–¹å¼äºŒï¼šactionè‡ªåŠ¨æ³¨å…¥service" class="headerlink" title="æ–¹å¼äºŒï¼šactionè‡ªåŠ¨æ³¨å…¥service"></a>æ–¹å¼äºŒï¼šactionè‡ªåŠ¨æ³¨å…¥service</h4><p>applicationContext.xmlä¸­ä¸éœ€è¦é…ç½®actionæ ‡ç­¾ï¼Œstruts.xmlæ–‡ä»¶ä¸­classä½¿ç”¨å…¨ç±»åï¼Œæ­¤æ—¶ä½¿ç”¨è‡ªåŠ¨æ³¨å…¥æ–¹æ¡ˆ</p>
<h3 id="å»¶è¿ŸåŠ è½½çš„é—®é¢˜"><a href="#å»¶è¿ŸåŠ è½½çš„é—®é¢˜" class="headerlink" title="å»¶è¿ŸåŠ è½½çš„é—®é¢˜"></a>å»¶è¿ŸåŠ è½½çš„é—®é¢˜</h3><p>åœ¨web.xmlä¸­é…ç½®openSessionInViewFilter<br>æ³¨æ„:openSessionInViewFilterä¸€å®šè¦åœ¨Struts2 Filterå‰é…ç½®</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- openSessionInViewFilter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>openSessionInView<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.orm.hibernate5.support.OpenSessionInViewFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>openSessionInView<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>æ¡†æ¶    &lt;!--åªèƒ½æœ‰ä¸€ä¸ªåˆ†ç±»--&gt;</category>
      </categories>
      <tags>
        <tag>ssh</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Jmeterå‹åŠ›æµ‹è¯•</title>
    <url>/2018/12/14/Jmeter%E5%8E%8B%E5%8A%9B%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<h2 id="jmeterå‹åŠ›æµ‹è¯•"><a href="#jmeterå‹åŠ›æµ‹è¯•" class="headerlink" title="jmeterå‹åŠ›æµ‹è¯•"></a>jmeterå‹åŠ›æµ‹è¯•</h2><blockquote>
<p>æ³¨æ„ï¼šéœ€åœ¨å®‰è£…jdkçš„ç¯å¢ƒä¸‹æ“ä½œ</p>
</blockquote>
<p>Apache JMeteræ˜¯Apacheç»„ç»‡å¼€å‘çš„åŸºäºJavaçš„å‹åŠ›æµ‹è¯•å·¥å…·ã€‚ç”¨äºå¯¹è½¯ä»¶åšå‹åŠ›æµ‹è¯•ï¼Œå®ƒæœ€åˆè¢«è®¾è®¡ç”¨äºWebåº”ç”¨æµ‹è¯•ï¼Œä½†åæ¥æ‰©å±•åˆ°å…¶ä»–æµ‹è¯•é¢†åŸŸã€‚ </p>
<a id="more"></a> 
<h3 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h3><ul>
<li><p>å®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">brew install jmeter</span><br><span class="line"></span><br><span class="line">è·¯å¾„ï¼š/usr/local/Cellar/jmeter/5.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯åŠ¨</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">open /usr/local/bin/jmeter</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><ul>
<li><p>ä¸‹è½½åœ°å€ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/apache/jmeter/binaries" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/apache/jmeter/binaries</a></p>
</li>
<li><p>å®‰è£…ï¼šç›´æ¥å°†ä¸‹è½½å¥½çš„zipå‹ç¼©åŒ…è¿›è¡Œè§£å‹å³å¯ã€‚</p>
</li>
<li>å¯åŠ¨ï¼šè¿›å…¥binç›®å½•ï¼Œæ‰¾åˆ°jmeter.batæ–‡ä»¶ï¼ŒåŒæœºæ‰“å¼€å³å¯å¯åŠ¨ã€‚</li>
</ul>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><h4 id="1ã€ä¿®æ”¹ä¸»é¢˜å’Œè¯­è¨€"><a href="#1ã€ä¿®æ”¹ä¸»é¢˜å’Œè¯­è¨€" class="headerlink" title="1ã€ä¿®æ”¹ä¸»é¢˜å’Œè¯­è¨€"></a>1ã€ä¿®æ”¹ä¸»é¢˜å’Œè¯­è¨€</h4><p>é»˜è®¤çš„è¯­è¨€æ˜¯è‹±è¯­ï¼Œè¿™æ ·ä¸å¤ªæ–¹ä¾¿ä½¿ç”¨ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹ä¸‹ä¸­æ–‡è¯­è¨€ã€‚</p>
<p>é€šè¿‡ã€Optionsã€‘-&gt; ã€Choose Languageã€‘å˜æ›´ç®€ä½“ä¸­æ–‡</p>
<p><img src="/images/jmeter/update language.png" alt="update language"></p>
<p>ä¸­æ–‡ç®€ä½“è¯­è¨€ä¿®æ”¹å®Œæˆã€‚ </p>
<h4 id="2ã€åˆ›å»ºé¦–é¡µçš„æµ‹è¯•ç”¨ä¾‹"><a href="#2ã€åˆ›å»ºé¦–é¡µçš„æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="2ã€åˆ›å»ºé¦–é¡µçš„æµ‹è¯•ç”¨ä¾‹"></a>2ã€åˆ›å»ºé¦–é¡µçš„æµ‹è¯•ç”¨ä¾‹</h4><p>ç¬¬ä¸€æ­¥ï¼šä¿å­˜æµ‹è¯•ç”¨ä¾‹</p>
<p><img src="/images/jmeter/save.png" alt="save jmx"></p>
<p>ç¬¬äºŒæ­¥ï¼šæ·»åŠ çº¿ç¨‹ç»„ï¼Œä½¿ç”¨çº¿ç¨‹æ¨¡æ‹Ÿç”¨æˆ·çš„å¹¶å‘</p>
<p><img src="/images/jmeter/create thread.png" alt="create thread"></p>
<p><img src="/images/jmeter/set thread.png" alt="set thread"></p>
<p>1000ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å¾ªç¯10æ¬¡ï¼Œä¹Ÿå°±æ˜¯tomcatä¼šæ¥æ”¶åˆ°10000ä¸ªè¯·æ±‚ã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ httpè¯·æ±‚ï¼Œå¹¶è®¾ç½®ç›¸å…³ç«¯å£ã€è¯·æ±‚è·¯å¾„åŠå‚æ•°</p>
<p><img src="/images/jmeter/add req.png" alt="add req"></p>
<p><img src="/images/jmeter/set req.png" alt="set req"></p>
<p>ç¬¬å››æ­¥ï¼šæ·»åŠ æŸ¥çœ‹ç»“æœæ ‘ï¼Œä¸ç”¨è¡¨æ ¼æŸ¥çœ‹ç»“æœ</p>
<p><img src="/images/jmeter/add result.png" alt="add result"></p>
<p><img src="/images/jmeter/check by excel.png" alt="check by excel"></p>
<h4 id="3ã€å¯åŠ¨ã€è¿›è¡Œæµ‹è¯•"><a href="#3ã€å¯åŠ¨ã€è¿›è¡Œæµ‹è¯•" class="headerlink" title="3ã€å¯åŠ¨ã€è¿›è¡Œæµ‹è¯•"></a>3ã€å¯åŠ¨ã€è¿›è¡Œæµ‹è¯•</h4><p>æ³¨æ„ï¼šå¯åŠ¨æ—¶ç»ˆç«¯æç¤ºä¸è¦ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢æ‰§è¡Œæµ‹è¯•è®¡åˆ’ï¼Œéœ€è¦åœ¨ç»ˆç«¯ä½¿ç”¨å‘½ä»¤æ‰§è¡Œ</p>
<blockquote>
<p>Donâ€™t use GUI mode for load testing !, only for Test creation and Test debugging.</p>
<p>For load testing, use CLI Mode (was NON GUI):</p>
<p>  jmeter -n -t [jmx file] -l [results file] -e -o [Path to web report folder]</p>
<p>&amp; increase Java Heap to meet your test requirements:</p>
<p>  Modify current env variable HEAP=â€-Xms1g -Xmx1g -XX:MaxMetaspaceSize=256mâ€ in the jmeter batch file</p>
<p>Check : <a href="https://jmeter.apache.org/usermanual/best-practices.html" target="_blank" rel="noopener">https://jmeter.apache.org/usermanual/best-practices.html</a></p>
</blockquote>
<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">jmeter -n -t SendMessage.jmx -l jmeter/result.txt -e -o jmeter/</span><br><span class="line"></span><br><span class="line"><span class="comment"># SendMessage.jmx æµ‹è¯•æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment"># jmeter/result.txt æµ‹è¯•ç»“æœæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment"># jmeter/ webæŠ¥å‘Šä¿å­˜è·¯å¾„</span></span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤æ‰§è¡Œç»“æŸååœ¨æŒ‡å®šè·¯å¾„ä¼šå‡ºç°å¯¹åº”çš„æŠ¥å‘Šï¼Œæ‰“å¼€index.htmlå¯æŸ¥çœ‹æŠ¥å‘Š</p>
<p><img src="/images/jmeter/report1.png" alt="report1"></p>
<h4 id="4ã€æŸ¥çœ‹webæŠ¥å‘Š"><a href="#4ã€æŸ¥çœ‹webæŠ¥å‘Š" class="headerlink" title="4ã€æŸ¥çœ‹webæŠ¥å‘Š"></a>4ã€æŸ¥çœ‹webæŠ¥å‘Š</h4><p><img src="/images/jmeter/report2.png" alt="report2"></p>
]]></content>
      <categories>
        <category>æ€§èƒ½</category>
      </categories>
      <tags>
        <tag>Jmeter</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®€å•çš„åŠ å¯†ç®—æ³•-MD5ã€SHA</title>
    <url>/2018/09/02/%E7%AE%80%E5%8D%95%E7%9A%84%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95-MD5%E3%80%81SHA/</url>
    <content><![CDATA[<h3 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h3><p>ç®€å•çš„ä»‹ç»å¸¸ç”¨çš„ä¸¤ä¸ªç®—æ³•åŠä»£ç å®ç°</p>
<h3 id="MD5ç®—æ³•"><a href="#MD5ç®—æ³•" class="headerlink" title="MD5ç®—æ³•"></a>MD5ç®—æ³•</h3><p><strong>MD5æ¶ˆæ¯æ‘˜è¦ç®—æ³•</strong>ï¼ˆè‹±è¯­ï¼šMD5 Message-Digest Algorithmï¼‰ï¼Œä¸€ç§è¢«å¹¿æ³›ä½¿ç”¨çš„<a href="https://baike.baidu.com/item/%E5%AF%86%E7%A0%81%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B0" target="_blank" rel="noopener">å¯†ç æ•£åˆ—å‡½æ•°</a>ï¼Œå¯ä»¥äº§ç”Ÿå‡ºä¸€ä¸ª128ä½16å­—èŠ‚çš„æ•£åˆ—å€¼ï¼ˆhash valueï¼‰ï¼Œç”¨äºç¡®ä¿ä¿¡æ¯ä¼ è¾“å®Œæ•´ä¸€è‡´ã€‚ æ‘˜è‡ª<a href="https://baike.baidu.com/item/MD5/212708?fromtitle=MD5ç®—æ³•&amp;fromid=174909&amp;fr=aladdin" target="_blank" rel="noopener">ç™¾åº¦ç™¾ç§‘</a></p>
<a id="more"></a> 
<h4 id="å®‰å…¨æ€§"><a href="#å®‰å…¨æ€§" class="headerlink" title="å®‰å…¨æ€§"></a>å®‰å…¨æ€§</h4><p>MD5ç®—æ³•å› å…¶ä¸å¯é€†çš„è®¾è®¡ï¼Œç†è®ºä¸Šæ˜¯ä¸å¯ç ´è§£çš„ï¼Œä½†æ˜¯æŸäº›ç½‘ç«™å°†å¸¸ç”¨å¯†ç ç»md5ç®—æ³•åŠ å¯†åå­˜å‚¨åˆ°æ•°æ®åº“ä¸­è¿›è¡ŒåŒ¹é…ï¼Œä»è€Œå®ç°äº‹å®ä¸Šçš„ç ´è§£ã€‚æ‰€ä»¥ç°åœ¨å¤§å¤šæ•°ç½‘ç«™å¼ºåˆ¶ç”¨æˆ·ä½¿ç”¨æ•°å­—å¤§å°å†™å­—æ¯ç­‰å¤æ‚ç»„åˆå¯†ç ï¼Œä»¥æ­¤æé«˜ç”¨æˆ·å¯†ç çš„å®‰å…¨æ€§ã€‚</p>
<h4 id="javaä»£ç å®ç°"><a href="#javaä»£ç å®ç°" class="headerlink" title="javaä»£ç å®ç°"></a>javaä»£ç å®ç°</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.SortedMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">// MD5åŠ å¯†å·¥å…·ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MD5Util</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// åˆ›å»ºmd5æ‘˜è¦,è§„åˆ™æ˜¯:æŒ‰å‚æ•°åç§°a-zæ’åº,é‡åˆ°ç©ºå€¼çš„å‚æ•°ä¸å‚åŠ ç­¾åã€‚</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createSign</span><span class="params">(SortedMap&lt;String, String&gt; packageParams,</span></span></span><br><span class="line"><span class="function"><span class="params">			String appid, String key)</span> </span>&#123;</span><br><span class="line">		StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">		Set es = packageParams.entrySet();</span><br><span class="line">		Iterator it = es.iterator();</span><br><span class="line">		<span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">			Map.Entry entry = (Map.Entry) it.next();</span><br><span class="line">			String k = (String) entry.getKey();</span><br><span class="line">			String v = (String) entry.getValue();</span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">null</span> != v &amp;&amp; !<span class="string">""</span>.equals(v) &amp;&amp; !<span class="string">"sign"</span>.equals(k)</span><br><span class="line">					&amp;&amp; !<span class="string">"key"</span>.equals(k)) &#123;</span><br><span class="line">				sb.append(k + <span class="string">"="</span> + v + <span class="string">"&amp;"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		sb.append(<span class="string">"key="</span> + key);</span><br><span class="line">		String sign = MD5Encode(sb.toString(), <span class="string">"UTF-8"</span>).toUpperCase();</span><br><span class="line">		<span class="keyword">return</span> sign;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">byteArrayToHexString</span><span class="params">(<span class="keyword">byte</span> b[])</span> </span>&#123;</span><br><span class="line">		StringBuffer resultSb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; b.length; i++)</span><br><span class="line">			resultSb.append(byteToHexString(b[i]));</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> resultSb.toString();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">byteToHexString</span><span class="params">(<span class="keyword">byte</span> b)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> n = b;</span><br><span class="line">		<span class="keyword">if</span> (n &lt; <span class="number">0</span>)</span><br><span class="line">			n += <span class="number">256</span>;</span><br><span class="line">		<span class="keyword">int</span> d1 = n / <span class="number">16</span>;</span><br><span class="line">		<span class="keyword">int</span> d2 = n % <span class="number">16</span>;</span><br><span class="line">		<span class="keyword">return</span> hexDigits[d1] + hexDigits[d2];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">MD5Encode</span><span class="params">(String origin, String charsetname)</span> </span>&#123;</span><br><span class="line">		String resultString = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			resultString = <span class="keyword">new</span> String(origin);</span><br><span class="line">			MessageDigest md = MessageDigest.getInstance(<span class="string">"MD5"</span>);</span><br><span class="line">			<span class="keyword">if</span> (charsetname == <span class="keyword">null</span> || <span class="string">""</span>.equals(charsetname))</span><br><span class="line">				resultString = byteArrayToHexString(md.digest(resultString</span><br><span class="line">						.getBytes()));</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				resultString = byteArrayToHexString(md.digest(resultString</span><br><span class="line">						.getBytes(charsetname)));</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception exception) &#123;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> resultString;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String hexDigits[] = &#123; <span class="string">"0"</span>, <span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>, <span class="string">"4"</span>, <span class="string">"5"</span>,</span><br><span class="line">			<span class="string">"6"</span>, <span class="string">"7"</span>, <span class="string">"8"</span>, <span class="string">"9"</span>, <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>, <span class="string">"f"</span> &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="SHAç®—æ³•"><a href="#SHAç®—æ³•" class="headerlink" title="SHAç®—æ³•"></a>SHAç®—æ³•</h3><p><strong>å®‰å…¨æ•£åˆ—ç®—æ³•</strong>ï¼ˆè‹±è¯­ï¼šSecure Hash Algorithmï¼Œç¼©å†™ä¸ºSHAï¼‰æ˜¯ä¸€ä¸ª<a href="https://baike.baidu.com/item/%E5%AF%86%E7%A0%81%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B0" target="_blank" rel="noopener">å¯†ç æ•£åˆ—å‡½æ•°</a>å®¶æ—ï¼Œæ˜¯<a href="https://baike.baidu.com/item/FIPS" target="_blank" rel="noopener">FIPS</a>æ‰€è®¤è¯çš„å®‰å…¨<a href="https://baike.baidu.com/item/%E6%95%A3%E5%88%97%E7%AE%97%E6%B3%95" target="_blank" rel="noopener">æ•£åˆ—ç®—æ³•</a>ã€‚èƒ½è®¡ç®—å‡ºä¸€ä¸ªæ•°å­—æ¶ˆæ¯æ‰€å¯¹åº”åˆ°çš„ï¼Œé•¿åº¦å›ºå®šçš„å­—ç¬¦ä¸²ï¼ˆåˆç§°æ¶ˆæ¯æ‘˜è¦ï¼‰çš„ç®—æ³•ã€‚ä¸”è‹¥è¾“å…¥çš„æ¶ˆæ¯ä¸åŒï¼Œå®ƒä»¬å¯¹åº”åˆ°ä¸åŒå­—ç¬¦ä¸²çš„æœºç‡å¾ˆé«˜ ã€‚</p>
<h4 id="javaä»£ç å®ç°-1"><a href="#javaä»£ç å®ç°-1" class="headerlink" title="javaä»£ç å®ç°"></a>javaä»£ç å®ç°</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.SortedMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">// SHA1ç®—æ³•å·¥å…·ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sha1Util</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// apiè¯´æ˜ï¼š createSHA1Signåˆ›å»ºç­¾åSHA1 getSha1()Sha1ç­¾å</span></span><br><span class="line">	<span class="comment">// åˆ›å»ºç­¾åSHA1</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createSHA1Sign</span><span class="params">(SortedMap&lt;String, String&gt; signParams)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">		Set es = signParams.entrySet();</span><br><span class="line">		Iterator it = es.iterator();</span><br><span class="line">		<span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">			Map.Entry entry = (Map.Entry) it.next();</span><br><span class="line">			String k = (String) entry.getKey();</span><br><span class="line">			String v = (String) entry.getValue();</span><br><span class="line">			sb.append(k + <span class="string">"="</span> + v + <span class="string">"&amp;"</span>);</span><br><span class="line">			<span class="comment">// è¦é‡‡ç”¨URLENCODERçš„åŸå§‹å€¼ï¼</span></span><br><span class="line">		&#125;</span><br><span class="line">		String params = sb.substring(<span class="number">0</span>, sb.lastIndexOf(<span class="string">"&amp;"</span>));</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> getSha1(params);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Sha1ç­¾å</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getSha1</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (str == <span class="keyword">null</span> || str.length() == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">char</span> hexDigits[] = &#123; <span class="string">'0'</span>, <span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span>, <span class="string">'4'</span>, <span class="string">'5'</span>, <span class="string">'6'</span>, <span class="string">'7'</span>, <span class="string">'8'</span>, <span class="string">'9'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span> &#125;;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			MessageDigest mdTemp = MessageDigest.getInstance(<span class="string">"SHA1"</span>);</span><br><span class="line">			mdTemp.update(str.getBytes(<span class="string">"UTF-8"</span>));</span><br><span class="line"></span><br><span class="line">			<span class="keyword">byte</span>[] md = mdTemp.digest();</span><br><span class="line">			<span class="keyword">int</span> j = md.length;</span><br><span class="line">			<span class="keyword">char</span> buf[] = <span class="keyword">new</span> <span class="keyword">char</span>[j * <span class="number">2</span>];</span><br><span class="line">			<span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; j; i++) &#123;</span><br><span class="line">				<span class="keyword">byte</span> byte0 = md[i];</span><br><span class="line">				buf[k++] = hexDigits[byte0 &gt;&gt;&gt; <span class="number">4</span> &amp; <span class="number">0xf</span>];</span><br><span class="line">				buf[k++] = hexDigits[byte0 &amp; <span class="number">0xf</span>];</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> String(buf);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="æ³¨ï¼š"><a href="#æ³¨ï¼š" class="headerlink" title="æ³¨ï¼š"></a>æ³¨ï¼š</h3><p>ä»£ç æ‘˜è‡ªCSDNåšå®¢ã€‚</p>
]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>md5</tag>
        <tag>sha1</tag>
      </tags>
  </entry>
</search>
